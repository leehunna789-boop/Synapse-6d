import streamlit as st
import os
import time

# --- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô ---
st.set_page_config(page_title="‡∏ä‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà Smooth Player", layout="wide")

st.markdown("""
    <style>
    .main { background-color: #0e1117; color: #ffffff; }
    .stAudio { width: 100%; border-radius: 20px; }
    </style>
    """, unsafe_allow_html=True)

st.title("üéµ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á R&B ‡∏ö‡∏≥‡∏ö‡∏±‡∏î (‡∏™‡∏π‡∏ï‡∏£ 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)")
st.write("‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡πÇ‡∏î‡∏¢: ‡∏ä‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà (12x12 System)")

# --- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏ü‡∏•‡πå ---
MUSIC_DIR = "my_music" # ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏ä‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà
if not os.path.exists(MUSIC_DIR):
    os.makedirs(MUSIC_DIR)

songs = [f for f in os.listdir(MUSIC_DIR) if f.endswith('.mp3')]

# --- ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏´‡∏•‡∏±‡∏Å ---
col1, col2 = st.columns([1, 1])

with col1:
    st.image("https://googleusercontent.com/image_generation_content/11", caption="‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Ç‡∏≠‡∏á‡∏ä‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà")

with col2:
    if songs:
        st.subheader("üìã ‡πÄ‡∏û‡∏•‡∏¢‡πå‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì")
        selected_song = st.selectbox("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ü‡∏±‡∏á", songs)
        
        # ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á
        audio_path = os.path.join(MUSIC_DIR, selected_song)
        audio_file = open(audio_path, 'rb')
        audio_bytes = audio_file.read()
        
        st.write(f"Ê≠£Âú®Êí≠Êîæ (‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô): **{selected_song}**")
        st.audio(audio_bytes, format='audio/mp3')
        
        # ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô
        st.divider()
        st.write("‚öôÔ∏è **‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô (Crossfade)**")
        fade_time = st.slider("‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≤‡∏á‡∏´‡∏≤‡∏¢ (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)", 0, 15, 10)
        
        if st.button("‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÅ‡∏ö‡∏ö‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏•"):
            st.info(f"‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Fade Out {fade_time} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡πà‡∏≠‡πÄ‡∏û‡∏•‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ...")
            # ‡πÉ‡∏ô Streamlit ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡∏•‡∏∞‡πÑ‡∏ü‡∏•‡πå ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏≥‡∏•‡∏≠‡∏á UI ‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏´‡πá‡∏ô‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ
            time.sleep(1)
            st.success("‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÄ‡∏û‡∏•‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß!")
    else:
        st.error("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà! ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ü‡∏•‡πå MP3 ‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå 'my_music' ‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö")

# --- ‡∏ó‡πà‡∏≠‡∏ô‡∏•‡πà‡∏≤‡∏á: ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏∞‡∏Ü‡∏±‡∏á‡∏ö‡∏≥‡∏ö‡∏±‡∏î ---
st.divider()
st.subheader("üîî ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ó‡∏£‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏∞‡∏Ü‡∏±‡∏á 432Hz")
if st.button("‡πÄ‡∏Ñ‡∏≤‡∏∞‡∏£‡∏∞‡∏Ü‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á"):
    st.write("‡πÄ‡∏´‡∏á‡πà‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á.... (‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ö‡∏≥‡∏ö‡∏±‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô)")
